<!doctype html>
<html>
<head>
  <title>Nano-particle Exposure Tool - Compute Building Volume</title>
  <script type="text/javascript" src="../contam/units_1.js"></script>
  <script>
    function do_onload()
    {
      var LengthInput = document.getElementById("LengthInput");
      var WidthInput = document.getElementById("WidthInput");
      var HeightInput = document.getElementById("HeightInput");
      window.units = 0;
      LengthInput.baseValue = 1;
      WidthInput.baseValue = 1;
      HeightInput.baseValue = 1;
      
      var volumeUnits = document.getElementById("volumeUnits");
      var floorAreaUnits = document.getElementById("floorAreaUnits");
      var wallAreaUnits = document.getElementById("wallAreaUnits");
      volumeUnits.innerHTML = CONTAM.Units.Strings.Volume[window.units];
      floorAreaUnits.innerHTML = CONTAM.Units.Strings.Area[window.units];
      wallAreaUnits.innerHTML = CONTAM.Units.Strings.Area[window.units];

      changeInput();
    }
    
    function changeUnits(combo)
    {
      var UnitsCombo = document.getElementById("UnitsCombo");
      var units = window.units = UnitsCombo.selectedIndex;
      var LengthInput = document.getElementById("LengthInput");
      var WidthInput = document.getElementById("WidthInput");
      var HeightInput = document.getElementById("HeightInput");
      
      LengthInput.value = CONTAM.Units.LengthConvert(LengthInput.baseValue, units, 0);
      WidthInput.value = CONTAM.Units.LengthConvert(WidthInput.baseValue, units, 0);
      HeightInput.value = CONTAM.Units.LengthConvert(HeightInput.baseValue, units, 0);
      
      var resultantVolume = document.getElementById("resultantVolume");
      var resultantFloorArea = document.getElementById("resultantFloorArea");
      var resultantWallArea = document.getElementById("resultantWallArea");
      resultantVolume.textContent = CONTAM.Units.VolumeConvert(vol, units, 0);
      resultantFloorArea.textContent = CONTAM.Units.AreaConvert(fa, units, 0);
      resultantWallArea.textContent = CONTAM.Units.AreaConvert(wa, units, 0);
      
      var volumeUnits = document.getElementById("volumeUnits");
      var floorAreaUnits = document.getElementById("floorAreaUnits");
      var wallAreaUnits = document.getElementById("wallAreaUnits");
      volumeUnits.innerHTML = CONTAM.Units.Strings.Volume[units];
      floorAreaUnits.innerHTML = CONTAM.Units.Strings.Area[units];
      wallAreaUnits.innerHTML = CONTAM.Units.Strings.Area[units];
    }
    
    function changeInput()
    {
      var LengthInput = document.getElementById("LengthInput");
      var WidthInput = document.getElementById("WidthInput");
      var HeightInput = document.getElementById("HeightInput");
      var lenFromUser = parseFloat(LengthInput.value);
      var widthFromUser = parseFloat(WidthInput.value);
      var heightFromUser = parseFloat(HeightInput.value);
      var units = window.units;
      LengthInput.baseValue = CONTAM.Units.LengthConvert(lenFromUser, units, 1);
      WidthInput.baseValue = CONTAM.Units.LengthConvert(widthFromUser, units, 1);
      HeightInput.baseValue = CONTAM.Units.LengthConvert(heightFromUser, units, 1);
      var len = LengthInput.baseValue;
      var width = WidthInput.baseValue;
      var height = HeightInput.baseValue;

      vol = len * width * height;
      fa = len * width;
      wa = (height * len + height * width) * 2;

      var resultantVolume = document.getElementById("resultantVolume");
      var resultantFloorArea = document.getElementById("resultantFloorArea");
      var resultantWallArea = document.getElementById("resultantWallArea");

      resultantVolume.textContent = CONTAM.Units.VolumeConvert(vol, units, 1);
      resultantFloorArea.textContent = CONTAM.Units.AreaConvert(fa, units, 1);
      resultantWallArea.textContent = CONTAM.Units.AreaConvert(wa, units, 1);
    }
    
    function ok_button()
    {
      var Nano = window.parent.Nano;
      Nano.CloseDialog(true);
    }
    
    function cancel_button()
    {
      var Nano = window.parent.Nano;
      Nano.CloseDialog(false);
    }
  </script>
  <style type="text/css">
    @import url("../../index.css");
    .inblock { display: inline-block; }
    .unit { display: inline-block; white-space:nowrap; min-width: 360px; padding:5px; }
    .col { min-width: 85px; }
  </style>
</head>
<body onload="do_onload();" style="background: white;">
  <div style="display:flex; flex-flow:row; margin: 1em;">
    <div style="display:flex; flex-flow:column;">
      <div class="section">
        <div class="unit">
          <div class="inblock col">
            Length
          </div>
          <input type="number" step="any" min="0" value ="1"
          id="LengthInput" onchange=" changeInput();">
        </div>
        <div class="unit">
          <div class="inblock col">
            Width
          </div>
          <input type="number" step="any" min="0" value ="1"
          id="WidthInput" onchange=" changeInput();">
        </div>
        <div class="unit">
          <div class="inblock col">
            Height
          </div>
          <input type="number" step="any" min="0" value ="1"
          id="HeightInput" onchange=" changeInput();">
          <select id="UnitsCombo" onchange="changeUnits(this);">
            <option>m</option>
            <option>ft</option>
            <option>cm</option>
            <option>in</option>
            <option>mm</option>
            <option>dm</option>
            <option>&micro;m</option>
          </select>
        </div>
      </div>
      <div class="section">
        <div class="unit">
          <div class="inblock col">Volume</div>
          <div id="resultantVolume" class="inblock" style="border:solid;min-width:200px;">&nbsp;</div>
          <div id="volumeUnits" class="inblock">m3</div>
        </div>
        <div class="unit">
          <div class="inblock col">Floor Area</div>
          <div id="resultantFloorArea" class="inblock" style="border:solid;min-width:200px;">&nbsp;</div>
          <div id="floorAreaUnits" class="inblock">m2</div>
        </div>
        <div class="unit">
          <div class="inblock col">Wall Area</div>
          <div id="resultantWallArea" class="inblock" style="border:solid;min-width:200px;">&nbsp;</div>
          <div id="wallAreaUnits" class="inblock">m2</div>
        </div>
      </div>
    </div>
  </div>
  <div style="margin-left:2em;">
    <input value="OK" type="button" onclick="ok_button();">
    <input value="Cancel" type="button" onclick="cancel_button();">
  </div>
</body>
</html>